---
title: "TCP Port Scan Autodiscovery"
sidebar_position: 31
---

import ThemedImage from '@theme/ThemedImage'
import useBaseUrl from '@docusaurus/useBaseUrl'

TCP port scan autodiscovery accelerates autodiscovery by pre-scanning a specified range of IP addresses. Device42 determines which machines exist, which ports the machines have open, and whether they are running \*nix or Windows. 

When the scan is complete, Device42 will use the resulting TCP scan data to either create or update an autodiscovery job for the qualifying IPs.

## Using TCP Port Scan to Create New Autodiscovery Jobs

First, configure the TCP port scan. The result of a TCP port scan is itself a new autodiscovery job.

- From the main menu, select **Discovery > TCP Port Scan** to open the **TCP Port Scan** list page and click **Create**.

- Provide the range of FQDN or IP addresses for the **Server(s)** and specify which **Remote Collector** with Windows Discovery Service (WDS) you want to run the scan on. Optionally, add any servers to exclude from the scan.

    <ThemedImage
    alt="TCP Port Scan form"
    sources={{
        light: useBaseUrl('/assets/images/tcp-port-scan-auto-discovery/add-tcp-port-scan-light.png'),
        dark: useBaseUrl('/assets/images/tcp-port-scan-auto-discovery/add-tcp-port-scan-dark.png'),
    }}
    />

Under **Settings for auto-created Hypervisors/\*nix/win AD Task**, provide the settings you want the \*nix or Windows autodiscovery job to be created with. This will create the appropriate autodiscovery job for you, with the provided naming template and specified settings, and maintain the list of servers based on the results of each TCP port scan run.

- Define the naming template pattern that will be used to generate unique names for the created discovery jobs. Include any credentials required for accessing the target servers under the **Username / Password(s)** field.

    <ThemedImage
    alt="Auto-create job settings"
    sources={{
        light: useBaseUrl('/assets/images/tcp-port-scan-auto-discovery/auto-create-settings-light.png'),
        dark: useBaseUrl('/assets/images/tcp-port-scan-auto-discovery/auto-create-settings-dark.png'),
    }}
    />

- Configure the settings related to the discovery of virtual environments.  

    <ThemedImage
    alt="VM options"
    sources={{
        light: useBaseUrl('/assets/images/tcp-port-scan-auto-discovery/vm-options-light.png'),
        dark: useBaseUrl('/assets/images/tcp-port-scan-auto-discovery/vm-options-dark.png'),
    }}
    />

- Use the **Device name format** settings to set your naming preferences for discovered devices and specify the scope of the data to be collected. 

  <ThemedImage
  alt="Device name format options"
  sources={{
      light: useBaseUrl('/assets/images/tcp-port-scan-auto-discovery/device-name-format-light.png'),
      dark: useBaseUrl('/assets/images/tcp-port-scan-auto-discovery/device-name-format-dark.png'),
  }}
  />

- Specify the settings for the discovery of software and services, which include two cloud service options (**Discover ProviderID/Cloud ID** and **Use provider token**:).

  <ThemedImage
  alt="Discover software and app comp settings"
  sources={{
      light: useBaseUrl('/assets/images/tcp-port-scan-auto-discovery/discover-software-app-comp-settings-light.png'),
      dark: useBaseUrl('/assets/images/tcp-port-scan-auto-discovery/discover-software-app-comp-settings-dark.png'),
  }}
  />

  - **Store Application Components Config Files**: Visit the [Application Components](/docs/auto-discovery/application-components) page for more information on application components.

- Apply naming conventions to the discovered devices. Select **Strip domain suffix** to drop everything after the first period (`server.domain.com` becomes `server`), and optionally, elect to **Use the server as the device name**.

  <ThemedImage
  alt="Naming options"
  sources={{
      light: useBaseUrl('/assets/images/tcp-port-scan-auto-discovery/naming-options-light.png'),
      dark: useBaseUrl('/assets/images/tcp-port-scan-auto-discovery/naming-options-dark.png'),
  }}
  />

- Change the service level to the specified level when no VM is detected, assign the discovered devices to a VRF group, and associate specific customers with the discovered devices. 

    <ThemedImage
    alt="Service level and VRF group options"
    sources={{
        light: useBaseUrl('/assets/images/tcp-port-scan-auto-discovery/service-level-vrfgroup-light.png'),
        dark: useBaseUrl('/assets/images/tcp-port-scan-auto-discovery/service-level-vrfgroup-dark.png'),
    }}
    />
    
- Allow the generated discovery jobs to **Collect database server information**.

    <ThemedImage
    alt="DB settings"
    sources={{
      light: useBaseUrl('/assets/images/tcp-port-scan-auto-discovery/db-settings-light.png'),
      dark: useBaseUrl('/assets/images/tcp-port-scan-auto-discovery/db-settings-dark.png'),
    }}
    />

- Configure the metadata settings by selecting an **Object Category for discovered devices** and entering **Tags for discovered devices**. Tags are particularly useful to use with the Device42 [Application Dependency Mapping](/apps/enterprise-application-dependency-mapping/) feature.

    <ThemedImage
    alt="Object settings"
    sources={{
      light: useBaseUrl('/assets/images/tcp-port-scan-auto-discovery/object-settings-light.png'),
      dark: useBaseUrl('/assets/images/tcp-port-scan-auto-discovery/object-settings-dark.png'),
    }}
    />

:::note
New secrets added to TCP port scans will not be added to their corresponding hypervisors, \*nix, or Windows discovery jobs.
:::

## Run Now or Schedule

You can schedule TCP port scans similarly to all other autodiscovery jobs.

Select **+ Add another Autodiscovery Schedule** when editing a job to create a run schedule for that job.

<ThemedImage
    alt="Schedule TCP scan"
    sources={{
    light: useBaseUrl('/assets/images/tcp-port-scan-auto-discovery/tcp-schedule-light.png'),
    dark: useBaseUrl('/assets/images/tcp-port-scan-auto-discovery/tcp-schedule-dark.png'),
    }}
/>

:::note
Setting the schedule on a TCP port scan job will schedule the TCP port scan job itself but not the autodiscovery jobs created as a **result** of that TCP port scan.
:::

Upon saving the job, click **Run Now** to run the job immediately. You can also run the job from the list page.

<ThemedImage
    alt="Schedule TCP scan"
    sources={{
    light: useBaseUrl('/assets/images/tcp-port-scan-auto-discovery/tcp-run-now-light.png'),
    dark: useBaseUrl('/assets/images/tcp-port-scan-auto-discovery/tcp-run-now-dark.png'),
    }}
/>

Newly created jobs will not run on the first day they are created, to prevent an excessive number of jobs from running simultaneously. If you would like to run a job after its initial creation, click the **Run Now** button next to the job after creation.
