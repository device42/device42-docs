---
title: "PagerDuty Integration"
sidebar_position: 23
---

import ThemedImage from '@theme/ThemedImage'
import useBaseUrl from '@docusaurus/useBaseUrl'

Use the PagerDuty integration to notify on-call responders when alerts are triggered.

You can customize alerts sent from Device42 using a wide range of user configurable options. These alert types include, but are not limited to, the following:

- **Device42 License:** Days to license expiration.
- **Individual Power Unit Sensor(s):** Temperature or humidity rules for selected sensors.
- **Any Power Unit Sensor:** Temperature or humidity rules for any sensor.
- **Individual Power Unit(s) Infeed:** Power threshold rules for selected power unit infeeds.
- **Any Power Unit(s) Infeed:** Power threshold rules for any power unit infeed.
- **Power Unit Offline:** Any power unit gateway is offline.
- **Individual Bank:** Power threshold rules for selected PDU bank(s).
- **Any Bank:** Power threshold rules for any PDU bank.
- **Any UPS:** State or threshold rules (battery, voltage, current, load) for any UPS.
- **Individual Software Count:** Count or license percentage use for selected software or OS(s).
- **Any Software Count:** Count or license percentage use for any software or OS.
- **Prohibited Software:** When any prohibited software is discovered.
- **Individual Operating System Count:** Count or license percentage use for selected OS(s).
- **Any Operating System Count:** Count or license percentage use for any OS.
- **Individual Subnet:** Percentage use for individual subnet(s).
- **Any Subnet:** Percentage use for any subnet.
- **Individual Part Model Count:** Number or percentage available for selected part model(s).
- **Any Part Model Count:** Number or percentage available for selected part model(s).

## How it Works

Device42 metrics that fall outside of a designated range or meet a given criteria will send an alert to a service in PagerDuty.

## Requirements

- Device42 version 16.14.00 and later.
- Network access to one of the Device42 Cloud Connectors. For example, `connect.device42.net` (US) or `connect-eu.device42.net` (EU).

## Support

If you need help with this integration, please contact **Device42 Support** using any of our listed contact methods.

- **Hours of Operation:** Monday-Friday, 9AM – 6PM EST
- **Phone:** 1 (844) 424-2422
- **Email:** [support@device42.com](mailto:support@device42.com)
- **Website:** https://support.device42.com

## PagerDuty Configuration

You need a new or existing PagerDuty Service to add the Device42 integration to. 

The Device42 integration in PagerDuty will generate a key that you'll use in Device42's External Integration.

### Create a New Service with Integration

To create a new service, go to **Services > Service Directory** and click the **+ New Service** button.
The setup will guide you to selecting an integration in the final step.  

- To create a new service, click the **+ New Service** button and enter a **Name** and optional **Description** for the new service. Continue with steps 2 and 3 of the guided setup until you get to the [fourth **Integration** step](#select-the-device42-integration). 

:::tip
Please refer to PagerDuty's [Configuring Services and Integrations](https://support.pagerduty.com/docs/services-and-integrations#section-configuring-services-and-integrations) docs page for details on the service options.
:::

    ![Create a PagerDuty Service](/assets/images/pagerduty-integration/pagerduty-create-service.png)

- To add the Device42 integration to an existing PagerDuty Service, click the name of the service, open the **Integrations** tab, then click the **+ Add New Integration** button.

    ![Add new integration](/assets/images/pagerduty-integration/pagerduty-add-integration.png)

### Select the Device42 Integration    

When you get to the **Integration** step, search for and select **Device42**, then click **Create Service**.

![Select Device42 integration](/assets/images/pagerduty-integration/pagerduty-select-integration.png)

### Copy the Integration Key

An **Integration Key** will be generated. Keep this key saved in a safe place, as it will be used when you configure the integration with Device42 in the next section. You won't need the **Integration URL** generated by PagerDuty.

![Copy the Integration Key](/assets/images/pagerduty-integration/pagerduty-integration-key.png)

## Device42 Configuration

The Device42 setup includes configuring your [Cloud Services](/integration/external-integrations/cloud-services-settings.mdx) (if you haven't already), an [External Integration](#create-an-external-integration), and an [Alert](#configure-an-alert). To ensure that the integration is working as expected, you can manually trigger the alert condition as described below under [Test the Integration](#test-the-integration).

### Configure Cloud Services

The [Cloud Connector](/integration/external-integrations/device42-cloud-connector-overview.mdx) provides a secure and reliable way to route external integration communication. 

From the Device42 Dashboard, go to **Tools > Integrations > Cloud Services** and click **Edit** at the top-right of the page.

1. Fill your Device42 instance URL in **D42 URL for SaaS apps**, for example `https://192.168.92.130/`.
2. Fill in the **Company Name** and **Email** to be used as a contact for any integration-related incidents.
3. Select the **USA** option from the **Cloud Connector** drop down list if this is the region closest to you, otherwise select **Europe**. PagerDuty works best with a USA Cloud Connector.
4. Click **Save** and the page will reload, displaying your **Device42 GUID**.

<ThemedImage
  alt="Device42 Cloud Services"
  sources={{
    light: useBaseUrl('/assets/images/pagerduty-integration/cloud-services-light.png'),
    dark: useBaseUrl('/assets/images/pagerduty-integration/cloud-services-dark.png'),
  }}
/>

### Create the PagerDuty External Integration

Navigate to **Tools > Integrations > External Integrations** and click **Create** on the top-right of the screen.

1. In the **URL** field, enter the domain of your PagerDuty account as it appears in the browser's address bar, for example, `https://device42demoacc.pagerduty.com`. Note this is not the **Integration URL** from the Device42 integration in PagerDuty.
2. Select **PagerDuty** from the **Type** drop down field.
3. In the **Token** field, input the **Integration Key** you got from the Device42 integration in PagerDuty: 
    - Click the **plus icon** to create a new Secret.
    - In the pop-up window, click the **Create** button at the top right.
    - Enter a **Username** that will act as an alias and be attached to the PagerDuty integration key for future reference.
    - Paste the PagerDuty **Integration Key** in the **Password** field ensuring that there are no trailing white spaces or new line characters.
4. **Save** the External Integration.

<ThemedImage
  alt="Add external integration"
  sources={{
    light: useBaseUrl('/assets/images/pagerduty-integration/add-external-integration-light.png'),
    dark: useBaseUrl('/assets/images/pagerduty-integration/add-external-integration-dark.png'),
  }}
/>

### Configure an Alert

You need to configure a Device42 alert to use the PagerDuty External Integration and route the alert message to PagerDuty. The following steps will configure a prohibited software alert, but any type of alert can be used and would have similar steps.

1. Go to **Analytics > Alerts > Setup Alerts** and click the **Create** button.
2. Under **Rule Type** select **Software**.
5. Under **Trigger** select **Prohibited Software Installed**.
6. For the **Alert Type** choose **Alert Integration**.
7. From the **Alert Integration** dropdown select your PagerDuty instance URL that should be populated.
8. **Save** the alert.

<ThemedImage
  alt="Configure alert settings"
  sources={{
    light: useBaseUrl('/assets/images/pagerduty-integration/configure-alert-light.png'),
    dark: useBaseUrl('/assets/images/pagerduty-integration/configure-alert-dark.png'),
  }}
/>

## Test the Integration

To test that the condition triggers the alert as expected, designate a Software Component as **Prohibited** and add that software to a device. 

1. Navigate to **Resources > Software Components > All Software Components**.
2. Click on the software component you want to set as prohibited and click the **Edit** button on the top-right.
4. Under **Software Type** select **Prohibited**.
5. **Save** the change.

<ThemedImage
  alt="Software component settings"
  sources={{
    light: useBaseUrl('/assets/images/pagerduty-integration/software-component-light.png'),
    dark: useBaseUrl('/assets/images/pagerduty-integration/software-component-dark.png'),
  }}
/>

Next, manually (without running a discovery job) associate the prohibited software with a device, which you can do in multiple ways like creating a new Software In Use record or new device with the prohibited software. In this example we'll edit an existing device to include the prohibited software. 

1. Go to **Resources > Compute > All Devices** and select a device.
2. Click **Edit** and scroll down to **Software In Use**.
3. Click **+ Add New** and choose from the **Software** dropdown, select the prohibited software (`libsqlite3-0` in the example).
4. **Save** the device to designate the software as prohibited and trigger the alert created in the steps above.

<ThemedImage
  alt="Add prohibited software to device"
  sources={{
    light: useBaseUrl('/assets/images/pagerduty-integration/add-prohibited-software-light.png'),
    dark: useBaseUrl('/assets/images/pagerduty-integration/add-prohibited-software-dark.png'),
  }}
/>

When the alert message is triggered, an incident is reported in PagerDuty.

![PagerDuty incident alert](/assets/images/pagerduty-integration/pagerduty-incident-alert.png)

You can view incident details in PagerDuty.

![PagerDuty incident details](/assets/images/pagerduty-integration/pagerduty-incident-details.png)

Remember to undo the changes you made in Device42 when testing the instance – change the prohibited software type on the Software Component you used and remove the Software In Use entry from the device.

## How to Uninstall the Integration

To uninstall the integration, delete the Device42 integration in PagerDuty or disable its associated service, and in Device42 delete the External Integration.

### Delete the Integration in PagerDuty

In PagerDuty, navigate to **Services > Service Directory** and click on the service with the Device42 integration:

1. Go to the **Integrations** tab and click the black **gear icon**.
2. Select **Delete Integration**
3. Confirm the deletion when prompted.

![Delete Device42 integration](/assets/images/pagerduty-integration/pagerduty-delete-integration.png)

Alternatively, you can disable the service with the Device42 integration:

1. Go to **Services > Service Directory**.
2. On the right side of the service you want to disable, click the **More** dropdown menu.
3. Click **Disable Service** and click **Disable** on the confirmation dialog.

### Delete the Integration in Device42

In Device42 navigate to **Tools > Integrations > External Integrations** and select the checkbox next to the PagerDuty integration you want to remove.

- From the **Actions** dropdown menu select **Delete with Detailed Confirmation**.

    <ThemedImage
    alt="Delete External Integration"
    sources={{
        light: useBaseUrl('/assets/images/pagerduty-integration/delete-external-integration-light.png'),
        dark: useBaseUrl('/assets/images/pagerduty-integration/delete-external-integration-dark.png'),
    }}
    />

- On the confirmation screen, click **Delete**.

    <ThemedImage
    alt="Confirm the deletion"
    sources={{
        light: useBaseUrl('/assets/images/pagerduty-integration/confirm-delete-external-integration-light.png'),
        dark: useBaseUrl('/assets/images/pagerduty-integration/confirm-delete-external-integration-dark.png'),
    }}
    />
