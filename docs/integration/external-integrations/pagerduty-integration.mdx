---
title: "PagerDuty Integration"
sidebar_position: 23
---

import ThemedImage from '@theme/ThemedImage'
import useBaseUrl from '@docusaurus/useBaseUrl'

Use the PagerDuty integration to notify on-call responders when an alert is triggered in Device42. PagerDuty allows you to set up escalation profiles to ensure a response to critical IT events if the designated on-call staff do not respond in time. 

Connect your Device42 CMDB using the Device42 integration in PagerDuty, then configure an alert in Device42 to log an incident in PagerDuty when a violating condition is met.

This guide walks you through creating a PagerDuty Service, setting up the integration and alert in Device42, testing the integration, and uninstalling the integration in PagerDuty and Device42.

## Alert Types

You can customize alerts sent from Device42 by choosing from a wide range of violating conditions within a set of **Rule Types**, such as Discovery, Operating System, Part Model, Software, and more. Choose from various available triggers for each rule type. These triggers include, but are not limited to, the following:

Operating System

- **Individual Operating System Count:** Count or license percentage use for selected OS(s).
- **Any Operating System Count:** Count or license percentage use for any OS.

Part Model

- **Individual Part Model Count:** Number or percentage available for selected part model(s).
- **Any Part Model Count:** Number or percentage available for selected part model(s).

Power Unit

- **Individual Power Unit Sensor(s):** Temperature or humidity rules for selected sensors.
- **Any Power Unit Sensor:** Temperature or humidity rules for any sensor.
- **Individual Power Unit(s) Infeed:** Power threshold rules for selected power unit infeeds.
- **Any Power Unit(s) Infeed:** Power threshold rules for any power unit infeed.
- **Power Unit Offline:** Any power unit gateway is offline.
- **Individual Bank:** Power threshold rules for selected PDU bank(s).
- **Any Bank:** Power threshold rules for any PDU bank.
- **Any UPS:** State or threshold rules (battery, voltage, current, load) for any UPS.

Software

- **Individual Software Count:** Count or license percentage use for selected software or OS(s).
- **Any Software Count:** Count or license percentage use for any software or OS.
- **Prohibited Software:** When any prohibited software is discovered.

Subnet

- **Individual Subnet:** Percentage use for individual subnet(s).
- **Any Subnet:** Percentage use for any subnet.

System

- **Device42 License:** Days to license expiration.

## How it Works

When a Device42 metric falls outside of a designated range or meets a given criterion, Device42 sends an alert to a service in PagerDuty.

## Requirements

- Device42 version 16.14.00 and later
- Network access to one of the Device42 Cloud Connectors, such as `connect.device42.net` (US) or `connect-eu.device42.net` (EU)

## Support

If you need help with this integration, please contact **Device42 Support** using any of our listed contact methods.

- **Hours of Operation:** Monday-Friday, 9 am–6 pm EST
- **Phone:** 1 (844) 424-2422
- **Email:** [support@device42.com](mailto:support@device42.com)
- **Website:** https://support.device42.com

## PagerDuty Configuration

You need a new or existing PagerDuty Service to add the Device42 integration to. 

The Device42 integration in PagerDuty will generate a key that you'll use in Device42's External Integration.

### Create a New Service with Integration

To create a new service, go to **Services > Service Directory** and click the **+ New Service** button.

Follow the guided setup until you reach the [fourth **Integration** step](#select-the-device42-integration). 

:::tip
Please refer to PagerDuty's [Configuring Services and Integrations](https://support.pagerduty.com/docs/services-and-integrations#section-configuring-services-and-integrations) docs page for details on the service options.
:::

![Create a PagerDuty Service](/assets/images/pagerduty-integration/pagerduty-create-service.png)

### Add Integration to an Existing Service

To add the Device42 integration to an existing PagerDuty Service, click the name of the service, open the **Integrations** tab, then click the **+ Add New Integration** button.

![Add new integration](/assets/images/pagerduty-integration/pagerduty-add-integration.png)

### Select the Device42 Integration    

When you get to the **Integration** step, search for and select **Device42**, then click **Create Service**.

![Select Device42 integration](/assets/images/pagerduty-integration/pagerduty-select-integration.png)

### Copy the Integration Key

An **Integration Key** will be generated. Keep this key saved in a safe place, as you'll use it to configure the integration with Device42 in the next section. You won't need the **Integration URL** generated by PagerDuty.

![Copy the Integration Key](/assets/images/pagerduty-integration/pagerduty-integration-key.png)

## Device42 Configuration

The Device42 setup includes configuring your [Cloud Services](/integration/external-integrations/cloud-services-settings.mdx) (if you haven't already), an [External Integration](#create-an-external-integration), and an [Alert](#configure-an-alert). To ensure that the integration is working as expected, you can manually trigger the alert condition as described below under [Test the Integration](#test-the-integration).

### Configure Cloud Services

The [Cloud Connector](/integration/external-integrations/device42-cloud-connector-overview.mdx) provides a secure and reliable way to route external integration communication. 

From the Device42 Dashboard, go to **Tools > Integrations > Cloud Services** and click **Edit** at the top right of the page.

Enter your Device42 instance URL in the **D42 URL for SaaS apps** field, for example, `https://192.168.92.130/`.

Fill in the **Company Name** and **Email** to be used as a contact for any integration-related incidents.

Select the **USA** option from the **Cloud Connector** dropdown list if the USA is the region closest to you; otherwise, select **Europe**. PagerDuty works best with a USA Cloud Connector.

Click **Save** and the page will reload, displaying your **Device42 GUID**.

<ThemedImage
  alt="Device42 Cloud Services"
  sources={{
    light: useBaseUrl('/assets/images/pagerduty-integration/cloud-services-light.png'),
    dark: useBaseUrl('/assets/images/pagerduty-integration/cloud-services-dark.png'),
  }}
/>

### Create the PagerDuty External Integration

Navigate to **Tools > Integrations > External Integrations** and click **Create** on the top-right of the screen.

In the **URL** field, enter the domain of your PagerDuty account as it appears in the browser's address bar, for example, `https://device42demoacc.pagerduty.com`. Note this is not the **Integration URL** from the Device42 integration in PagerDuty.

Select **PagerDuty** from the **Type** dropdown field.

In the **Token** field, input the **Integration Key** you got from the Device42 integration in PagerDuty: 

- Click the **plus icon** to create a new Secret.
- In the pop-up window, click the **Create** button at the top right.
- Enter a **Username** that will act as an alias and be attached to the PagerDuty integration key for future reference.
- Paste the PagerDuty **Integration Key** in the **Password** field, ensuring that there are no trailing white spaces or new line characters.

**Save** the External Integration.

<ThemedImage
  alt="Add external integration"
  sources={{
    light: useBaseUrl('/assets/images/pagerduty-integration/add-external-integration-light.png'),
    dark: useBaseUrl('/assets/images/pagerduty-integration/add-external-integration-dark.png'),
  }}
/>

### Configure an Alert

You need to configure a Device42 alert to use the PagerDuty External Integration and route the alert message to PagerDuty. The following steps configure a prohibited software alert, but any type of alert can be used and would have similar steps:

- Go to **Analytics > Alerts > Setup Alerts** and click the **Create** button.
- Under **Rule Type** select **Software**.
- Under **Trigger** select **Prohibited Software Installed**.
- For the **Alert Type** choose **Alert Integration**.
- From the **Alert Integration** dropdown, select your PagerDuty instance URL that should be populated.
- **Save** the alert.

<ThemedImage
  alt="Configure alert settings"
  sources={{
    light: useBaseUrl('/assets/images/pagerduty-integration/configure-alert-light.png'),
    dark: useBaseUrl('/assets/images/pagerduty-integration/configure-alert-dark.png'),
  }}
/>

## Test the Integration

To test that the condition triggers the alert as expected, designate a Software Component as **Prohibited** and add that software to a device. 

- Navigate to **Resources > Software Components > All Software Components**.
- Click on the software component you want to set as prohibited and click the **Edit** button on the top-right.
- Under **Software Type** select **Prohibited**.
- **Save** the change.

<ThemedImage
  alt="Software component settings"
  sources={{
    light: useBaseUrl('/assets/images/pagerduty-integration/software-component-light.png'),
    dark: useBaseUrl('/assets/images/pagerduty-integration/software-component-dark.png'),
  }}
/>

Next, manually associate (without running a discovery job) the prohibited software with a device. You can do this in multiple ways, such as by creating a new Software In Use record or a new device with the prohibited software. In this example, we'll edit an existing device to include the prohibited software. 

- Go to **Resources > Compute > All Devices** and select a device.
- Click **Edit** and scroll down to **Software In Use**.
- Click **+ Add New** and choose from the **Software** dropdown, select the prohibited software (`libsqlite3-0` in the example).
- **Save** the device to designate the software as prohibited and trigger the alert created in the steps above.

<ThemedImage
  alt="Add prohibited software to device"
  sources={{
    light: useBaseUrl('/assets/images/pagerduty-integration/add-prohibited-software-light.png'),
    dark: useBaseUrl('/assets/images/pagerduty-integration/add-prohibited-software-dark.png'),
  }}
/>

When the alert message is triggered, an incident is reported in PagerDuty.

![PagerDuty incident alert](/assets/images/pagerduty-integration/pagerduty-incident-alert.png)

You can view incident details in PagerDuty.

![PagerDuty incident details](/assets/images/pagerduty-integration/pagerduty-incident-details.png)

Remember to undo the changes you made in Device42 when testing the instance: Change the prohibited software type on the Software Component you used and remove the Software In Use entry from the device.

## How to Uninstall the Integration

To uninstall the integration, delete the Device42 integration in PagerDuty or disable its associated service. Then, in Device42, delete the External Integration.

### Delete the Integration in PagerDuty

In PagerDuty, navigate to **Services > Service Directory** and click on the service with the Device42 integration:

- Go to the **Integrations** tab and click the black **gear icon**.
- Select **Delete Integration**
- Confirm the deletion when prompted.

![Delete Device42 integration](/assets/images/pagerduty-integration/pagerduty-delete-integration.png)

Alternatively, you can disable the service with the Device42 integration:

- Go to **Services > Service Directory**.
- On the right side of the service you want to disable, click the **More** dropdown menu.
- Click **Disable Service** and click **Disable** on the confirmation dialog.

### Delete the Integration in Device42

In Device42, navigate to **Tools > Integrations > External Integrations** and select the checkbox next to the PagerDuty integration you want to remove.

From the **Actions** dropdown menu, select **Delete with Detailed Confirmation**.

<ThemedImage
alt="Delete External Integration"
sources={{
    light: useBaseUrl('/assets/images/pagerduty-integration/delete-external-integration-light.png'),
    dark: useBaseUrl('/assets/images/pagerduty-integration/delete-external-integration-dark.png'),
}}
/>

On the confirmation screen, click **Delete**.

<ThemedImage
alt="Confirm the deletion"
sources={{
    light: useBaseUrl('/assets/images/pagerduty-integration/confirm-delete-external-integration-light.png'),
    dark: useBaseUrl('/assets/images/pagerduty-integration/confirm-delete-external-integration-dark.png'),
}}
/>
